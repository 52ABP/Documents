# ASP.NET Core为什么有 AddMvc 和 AddMvcCore他们是什么关系？

在本视频中，我们将讨论AddMvc()和AddMvcCore()方法之间的区别。


要在ASP.NET Core应用程序中设置MVC，我们在Startup类的ConfigureServices（）方法中调用IServiceCollection接口的AddMvc（）方法。
```
services.AddMvc();

```
除了AddMvc（）方法，我们在IServiceCollection接口上也有AddMvcCore（）方法。 因此，我们想到的一个显而易见的问题是，这两种方法之间的区别是什么。
## AddMvc() v/s AddMvcCore() 

在我们讨论AddMvc（）和AddMvcCore（）方法之间的区别之前，让我们修改以下HomeController以返回JSON格式的数据，而不是简单的字符串。

目前，没有为HomeController类指定基类。 它现在还可以为我们从Index（）动作方法返回一个简单的字符串。

```
public class HomeController
{
    public string Index()
    {
            return "Hello from MVC";
    }
}
```

但是，如果我们想要从Index（）操作方法返回HTML视图或JSON数据，则我们的HomeController类必须继承框架提供的Controller类。 Controller基类提供了返回不同结果的支持，如JsonResult，ViewResult，PartialViewResult等。
修改HomeController类以从Controller类派生并从Index（）方法返回JsonResult，如下所示。

```
public class HomeController : Controller
{
    public JsonResult Index()
    {
        return Json(new { id=1, name="pragim" });
    }
}
```
> 请注意：Controller 类存在于Microsoft.AspNetCore.Mvc命名空间中。

 此时，运行应用程序，我们应该按预期在浏览器中看到JSON数据。 
 
现在，在ConfigureServices（）方法中调用AddMvcCore（）方法而不是AddMvc（）并运行应用程序。 
```
public void ConfigureServices（IServiceCollection services）
{ 
    services.AddMvcCore（）; 
}
```
我们收到以下错误

> 没有为“Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor”类型的服务注册

为了能够返回JSON数据，需要在依赖注入容器中注册JsonFormatterServices。AddMvc（）方法执行此操作，但不执行AddMvcCore（）方法。您可以通过查看ASP.NET Core MVC Github页面上的源代码来确认这一点。 

顾名思义，AddMvcCore（）方法只添加核心MVC服务。另一方面，AddMvc（）方法添加了所有必需的MVC服务。AddMvc（）方法在内部调用AddMvcCore（）方法，以添加所有核心MVC服务。因此，如果我们调用AddMvc（）方法，则无需再次显式调用AddMvcCore（）方法。

我希望这可以澄清AddMvc（）和AddMvcCore（）方法之间的区别。 























# 声明


> 如果您觉得我的文章质量还不错，欢迎打赏，也可以订阅我的视频哦 </br>
> 未得到授权不得擅自转载本文内容,52abp.com保留版权</br>
> 文字版目录： [https://www.52abp.com/Wiki/mvc/latest/1.Intro](https://www.52abp.com/Wiki/mvc/latest/1.Intro) </br>
> 交流QQ群：952387474 点击链接加入QQ群[《微软MVP带你学ASP.NET CORE》](https://jq.qq.com/?_wv=1027&k=5nq4PFQ)</br>
> 【收费】腾讯课堂:[https://ke.qq.com/course/392589?tuin=2522cdf3](https://ke.qq.com/course/392589?tuin=2522cdf3) </br>
> 【免费】youtube视频专区：[http://t.cn/Ei0F2EB](http://t.cn/Ei0F2EB) </br>
>
>免费的更新慢，收费的更新快，仅此而已。就这样。 </br>

## 关注微信公众号：角落的白板报
![公众号：角落的白板报](https://upload-images.jianshu.io/upload_images/1979022-f19c505c18160c16.png)











